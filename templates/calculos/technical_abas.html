{% extends 'base.html' %}

{% block title %}Cálculos Técnicos Avançados - Zelopack{% endblock %}

{% block styles %}
<style>
    .card-calc {
        transition: all 0.3s ease;
        margin-bottom: 15px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    
    .card-calc:hover {
        transform: translateY(-5px);
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    
    .card-header {
        background-color: #f8f9fa;
        border-bottom: 2px solid #007bff;
        font-weight: 600;
    }
    
    .tab-content {
        padding: 20px;
        border: 1px solid #dee2e6;
        border-top: none;
        border-radius: 0 0 5px 5px;
    }
    
    .nav-pills .nav-link {
        margin-right: 2px;
        border-radius: 4px 4px 0 0;
        padding: 10px 15px;
        color: #495057;
        font-weight: 500;
    }
    
    .nav-pills .nav-link.active {
        background-color: #007bff;
        color: white;
    }
    
    .form-control:focus {
        border-color: #80bdff;
        box-shadow: 0 0 0 0.2rem rgba(0,123,255,.25);
    }
    
    .btn-calculate {
        background-color: #007bff;
        color: white;
        font-weight: 600;
        padding: 8px 16px;
        border-radius: 4px;
        border: none;
        cursor: pointer;
        transition: all 0.2s;
    }
    
    .btn-calculate:hover {
        background-color: #0069d9;
        transform: translateY(-2px);
    }
    
    .result-box {
        background-color: #f8f9fa;
        border-left: 4px solid #28a745;
        padding: 15px;
        margin-top: 20px;
        border-radius: 4px;
    }
    
    .result-item {
        padding: 8px 0;
        border-bottom: 1px solid #eee;
    }
    
    .result-item:last-child {
        border-bottom: none;
    }
    
    .result-value {
        font-weight: bold;
        color: #28a745;
    }
    
    .input-with-unit {
        position: relative;
    }
    
    .input-unit {
        position: absolute;
        right: 10px;
        top: 50%;
        transform: translateY(-50%);
        color: #6c757d;
        font-size: 14px;
    }
    
    .form-label {
        font-weight: 500;
        margin-bottom: 5px;
    }
    
    .formula-box {
        background-color: #f0f5ff;
        border-radius: 4px;
        padding: 10px 15px;
        margin-bottom: 15px;
        font-family: "Courier New", monospace;
    }
    
    .formula-title {
        font-weight: 600;
        font-size: 0.9rem;
        margin-bottom: 5px;
        color: #0D47A1;
    }
    
    .tab-description {
        color: #6c757d;
        font-style: italic;
        margin-bottom: 15px;
    }
    
    /* Animação de loading */
    .loader {
        display: none;
        width: 20px;
        height: 20px;
        border: 3px solid #f3f3f3;
        border-top: 3px solid #3498db;
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin-right: 10px;
    }
    
    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
    
    .tab-pane {
        padding: 20px;
    }
    
    .nav-calc {
        display: flex;
        flex-wrap: wrap;
    }
    
    .nav-calc .nav-item {
        margin-right: 5px;
        margin-bottom: 5px;
    }
    
    .form-group {
        margin-bottom: 15px;
    }
    
    .calculation-group {
        border: 1px solid #ddd;
        border-radius: 5px;
        padding: 15px;
        margin-bottom: 20px;
    }
    
    .calculation-title {
        font-weight: 600;
        margin-bottom: 15px;
        color: #007bff;
    }
    
    .search-box {
        margin-bottom: 20px;
    }
    
    .tab-description {
        margin-bottom: 15px;
        font-style: italic;
        color: #666;
    }
    
    .no-results {
        padding: 20px;
        text-align: center;
        color: #6c757d;
    }
</style>
{% endblock %}

{% block content %}
<div class="container-fluid mt-4">
    <h2 class="mb-3"><i class="fas fa-calculator"></i> Cálculos Técnicos Avançados</h2>
    
    <div class="row">
        <div class="col-md-12">
            <div class="card">
                <div class="card-header">
                    <div class="d-flex justify-content-between align-items-center">
                        <span><i class="fas fa-flask"></i> Calculadora Técnica (29 cálculos)</span>
                        
                        <div class="search-box">
                            <input type="text" class="form-control" id="searchCalc" placeholder="Buscar cálculo...">
                        </div>
                    </div>
                </div>
                <div class="card-body">
                    <ul class="nav nav-tabs nav-calc mb-3" id="calcTabs" role="tablist">
                        <!-- 1. Produção Final (200) -->
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="producao-final-tab" data-bs-toggle="tab" data-bs-target="#producao-final" type="button" role="tab" aria-controls="producao-final" aria-selected="true">
                                <i class="fas fa-industry"></i> Produção Final
                            </button>
                        </li>
                        
                        <!-- 2. Produção (Litro) -->
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="producao-litro-tab" data-bs-toggle="tab" data-bs-target="#producao-litro" type="button" role="tab" aria-controls="producao-litro" aria-selected="false">
                                <i class="fas fa-tint"></i> Produção (Litro)
                            </button>
                        </li>
                        
                        <!-- 3. Abaixar Brix -->
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="abaixar-brix-tab" data-bs-toggle="tab" data-bs-target="#abaixar-brix" type="button" role="tab" aria-controls="abaixar-brix" aria-selected="false">
                                <i class="fas fa-water"></i> Abaixar Brix
                            </button>
                        </li>
                        
                        <!-- 4. Brix Corrigido -->
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="brix-corrigido-tab" data-bs-toggle="tab" data-bs-target="#brix-corrigido" type="button" role="tab" aria-controls="brix-corrigido" aria-selected="false">
                                <i class="fas fa-thermometer-half"></i> Brix Corrigido
                            </button>
                        </li>
                        
                        <!-- 5. Peso Bruto -->
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="peso-bruto-tab" data-bs-toggle="pill" href="#peso-bruto" role="tab" aria-selected="false">
                                <i class="fas fa-weight-hanging"></i> Peso Bruto
                            </a>
                        </li>
                        
                        <!-- 6. Corantes -->
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="corantes-tab" data-bs-toggle="pill" href="#corantes" role="tab" aria-selected="false">
                                <i class="fas fa-fill-drip"></i> Corantes
                            </a>
                        </li>
                        
                        <!-- 7. Densidade -->
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="densidade-tab" data-bs-toggle="pill" href="#densidade" role="tab" aria-selected="false">
                                <i class="fas fa-vial"></i> Densidade
                            </a>
                        </li>
                        
                        <!-- 8. Ratio -->
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="ratio-tab" data-bs-toggle="pill" href="#ratio" role="tab" aria-selected="false">
                                <i class="fas fa-balance-scale"></i> Ratio
                            </a>
                        </li>
                        
                        <!-- 9. Ratio - Brix -->
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="ratio-brix-tab" data-bs-toggle="pill" href="#ratio-brix" role="tab" aria-selected="false">
                                <i class="fas fa-calculator"></i> Ratio - Brix
                            </a>
                        </li>
                        
                        <!-- 10. Ratio - Acidez -->
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="ratio-acidez-tab" data-bs-toggle="pill" href="#ratio-acidez" role="tab" aria-selected="false">
                                <i class="fas fa-flask"></i> Ratio - Acidez
                            </a>
                        </li>
                        
                        <!-- 11. Acidez (%) -->
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="acidez-tab" data-bs-toggle="pill" href="#acidez" role="tab" aria-selected="false">
                                <i class="fas fa-burn"></i> Acidez (%)
                            </a>
                        </li>
                        
                        <!-- 12. Cálculo de Soda -->
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="calculo-soda-tab" data-bs-toggle="pill" href="#calculo-soda" role="tab" aria-selected="false">
                                <i class="fas fa-prescription-bottle"></i> Cálculo de Soda
                            </a>
                        </li>
                        
                        <!-- 13. Vitamina C -->
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="vitamina-c-tab" data-bs-toggle="pill" href="#vitamina-c" role="tab" aria-selected="false">
                                <i class="fas fa-tablets"></i> Vitamina C
                            </a>
                        </li>
                        
                        <!-- 14. Soda-Diversey -->
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="soda-diversey-tab" data-bs-toggle="pill" href="#soda-diversey" role="tab" aria-selected="false">
                                <i class="fas fa-prescription-bottle-alt"></i> Soda-Diversey
                            </a>
                        </li>
                        
                        <!-- 15. Ácido-Diversey -->
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="acido-diversey-tab" data-bs-toggle="pill" href="#acido-diversey" role="tab" aria-selected="false">
                                <i class="fas fa-vial"></i> Ácido-Diversey
                            </a>
                        </li>
                        
                        <!-- 16. Perda de Base -->
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="perda-base-tab" data-bs-toggle="pill" href="#perda-base" role="tab" aria-selected="false">
                                <i class="fas fa-percent"></i> Perda de Base
                            </a>
                        </li>
                        
                        <!-- 17. Qtd. Açúcar a Puxar -->
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="acucar-puxar-tab" data-bs-toggle="pill" href="#acucar-puxar" role="tab" aria-selected="false">
                                <i class="fas fa-cubes"></i> Qtd. Açúcar a Puxar
                            </a>
                        </li>
                        
                        <!-- 18. Aumentar Brix Açúcar Batido -->
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="acucar-batido-tab" data-bs-toggle="pill" href="#acucar-batido" role="tab" aria-selected="false">
                                <i class="fas fa-candy-cane"></i> Açúcar Batido
                            </a>
                        </li>
                        
                        <!-- 19. Previsão Brix -->
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="previsao-brix-tab" data-bs-toggle="pill" href="#previsao-brix" role="tab" aria-selected="false">
                                <i class="fas fa-chart-line"></i> Previsão Brix
                            </a>
                        </li>
                        
                        <!-- 20. Previsão Acidez -->
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="previsao-acidez-tab" data-bs-toggle="pill" href="#previsao-acidez" role="tab" aria-selected="false">
                                <i class="fas fa-chart-bar"></i> Previsão Acidez
                            </a>
                        </li>
                        
                        <!-- 21. Tempo de Finalização -->
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="tempo-finalizacao-tab" data-bs-toggle="pill" href="#tempo-finalizacao" role="tab" aria-selected="false">
                                <i class="fas fa-clock"></i> Tempo de Finalização
                            </a>
                        </li>
                        
                        <!-- 22. Aumentar Acidez -->
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="aumentar-acidez-tab" data-bs-toggle="pill" href="#aumentar-acidez" role="tab" aria-selected="false">
                                <i class="fas fa-arrow-up"></i> Aumentar Acidez
                            </a>
                        </li>
                        
                        <!-- 23. Diminuir Acidez -->
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="diminuir-acidez-tab" data-bs-toggle="pill" href="#diminuir-acidez" role="tab" aria-selected="false">
                                <i class="fas fa-arrow-down"></i> Diminuir Acidez
                            </a>
                        </li>
                        
                        <!-- 24. Correção de Brix -->
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="correcao-brix-tab" data-bs-toggle="pill" href="#correcao-brix" role="tab" aria-selected="false">
                                <i class="fas fa-prescription"></i> Correção de Brix
                            </a>
                        </li>
                        
                        <!-- 25. Conversão Cristal Líquido -->
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="cristal-liquido-tab" data-bs-toggle="pill" href="#cristal-liquido" role="tab" aria-selected="false">
                                <i class="fas fa-exchange-alt"></i> Cristal → Líquido
                            </a>
                        </li>
                        
                        <!-- 26. Correção Açúcar Cristal -->
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="correcao-acucar-tab" data-bs-toggle="pill" href="#correcao-acucar" role="tab" aria-selected="false">
                                <i class="fas fa-edit"></i> Correção Açúcar
                            </a>
                        </li>
                        
                        <!-- 27. Conversão Líquido - Cristal -->
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="liquido-cristal-tab" data-bs-toggle="pill" href="#liquido-cristal" role="tab" aria-selected="false">
                                <i class="fas fa-exchange-alt fa-flip-horizontal"></i> Líquido → Cristal
                            </a>
                        </li>
                        
                        <!-- 28. Peso Líquido 200 -->
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="peso-liquido-200-tab" data-bs-toggle="pill" href="#peso-liquido-200" role="tab" aria-selected="false">
                                <i class="fas fa-weight"></i> Peso Líquido 200
                            </a>
                        </li>
                        
                        <!-- 29. Peso Líquido Litro -->
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="peso-liquido-litro-tab" data-bs-toggle="pill" href="#peso-liquido-litro" role="tab" aria-selected="false">
                                <i class="fas fa-fill"></i> Peso Líquido Litro
                            </a>
                        </li>
                    </ul>
                    
                    <div class="tab-content" id="calcTabContent">
                        <!-- 1. Produção Final (200) -->
                        <div class="tab-pane fade show active" id="producao-final" role="tabpanel">
                            <div class="tab-description">
                                Calcula a produção final considerando perdas durante o processo.
                            </div>
                            
                            <div class="formula-box">
                                <div class="formula-title">Fórmula:</div>
                                <div>Produção Final = Peso Líquido - Perdas</div>
                            </div>
                            
                            <div class="calculation-group">
                                <form id="form-producao-final">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="form-label">Peso Líquido:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="peso_liquido" step="0.01" required>
                                                    <span class="input-unit">kg</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="form-label">Perdas:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="perdas" step="0.01" required>
                                                    <span class="input-unit">kg</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="row mt-3">
                                        <div class="col-12 text-end">
                                            <button type="button" class="btn btn-light me-2 btn-limpar">Limpar</button>
                                            <button type="button" class="btn btn-calculate" id="calcular-producao-final">
                                                <span class="loader"></span> Calcular
                                            </button>
                                        </div>
                                    </div>
                                </form>
                                
                                <div class="result-box mt-4" id="result-producao-final" style="display:none;">
                                    <div class="result-item">
                                        <div class="result-label">Produção Final:</div>
                                        <div class="result-value" id="valor-producao-final">0.00 kg</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 2. Produção (Litro) -->
                        <div class="tab-pane fade" id="producao-litro" role="tabpanel">
                            <div class="tab-description">
                                Converte a produção de peso (kg) para volume (L) usando a densidade.
                            </div>
                            
                            <div class="formula-box">
                                <div class="formula-title">Fórmula:</div>
                                <div>Produção (L) = Peso Líquido / Densidade</div>
                            </div>
                            
                            <div class="calculation-group">
                                <form id="form-producao-litro">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="form-label">Peso Líquido:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="peso_liquido" step="0.01" required>
                                                    <span class="input-unit">kg</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="form-label">Densidade:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="densidade" step="0.001" value="1.0" required>
                                                    <span class="input-unit">g/mL</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="row mt-3">
                                        <div class="col-12 text-end">
                                            <button type="button" class="btn btn-light me-2 btn-limpar">Limpar</button>
                                            <button type="button" class="btn btn-calculate" id="calcular-producao-litro">
                                                <span class="loader"></span> Calcular
                                            </button>
                                        </div>
                                    </div>
                                </form>
                                
                                <div class="result-box mt-4" id="result-producao-litro" style="display:none;">
                                    <div class="result-item">
                                        <div class="result-label">Produção em Volume:</div>
                                        <div class="result-value" id="valor-producao-litro">0.00 L</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 3. Abaixar Brix -->
                        <div class="tab-pane fade" id="abaixar-brix" role="tabpanel">
                            <div class="tab-description">
                                Calcula a quantidade de água necessária para diluir o produto e reduzir o brix para o valor desejado.
                            </div>
                            
                            <div class="formula-box">
                                <div class="formula-title">Fórmula:</div>
                                <div>Água (L) = (Brix Atual - Brix Desejado) × Volume Atual / Brix Desejado</div>
                            </div>
                            
                            <div class="calculation-group">
                                <form id="form-abaixar-brix">
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label class="form-label">Brix Atual:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="brix_atual" step="0.1" required>
                                                    <span class="input-unit">°Bx</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label class="form-label">Brix Desejado:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="brix_desejado" step="0.1" required>
                                                    <span class="input-unit">°Bx</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label class="form-label">Volume Atual:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="volume_atual" step="0.1" required>
                                                    <span class="input-unit">L</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="row mt-3">
                                        <div class="col-12 text-end">
                                            <button type="button" class="btn btn-light me-2 btn-limpar">Limpar</button>
                                            <button type="button" class="btn btn-calculate" id="calcular-abaixar-brix">
                                                <span class="loader"></span> Calcular
                                            </button>
                                        </div>
                                    </div>
                                </form>
                                
                                <div class="result-box mt-4" id="result-abaixar-brix" style="display:none;">
                                    <div class="result-item">
                                        <div class="result-label">Quantidade de Água:</div>
                                        <div class="result-value" id="valor-abaixar-brix">0.00 L</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Adicione as demais abas seguindo o mesmo padrão... -->
                        
                        <!-- 4. Brix Corrigido -->
                        <div class="tab-pane fade" id="brix-corrigido" role="tabpanel">
                            <div class="tab-description">
                                Corrige o valor de Brix medido considerando a temperatura da amostra.
                            </div>
                            
                            <div class="formula-box">
                                <div class="formula-title">Fórmula:</div>
                                <div>Brix Corrigido = Brix Medido + 0.002 × (Temperatura - 20)</div>
                            </div>
                            
                            <div class="calculation-group">
                                <form id="form-brix-corrigido">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="form-label">Brix Medido:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="brix_medido" step="0.1" required>
                                                    <span class="input-unit">°Bx</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="form-label">Temperatura:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="temperatura" step="0.1" value="20" required>
                                                    <span class="input-unit">°C</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="row mt-3">
                                        <div class="col-12 text-end">
                                            <button type="button" class="btn btn-light me-2 btn-limpar">Limpar</button>
                                            <button type="button" class="btn btn-calculate" id="calcular-brix-corrigido">
                                                <span class="loader"></span> Calcular
                                            </button>
                                        </div>
                                    </div>
                                </form>
                                
                                <div class="result-box mt-4" id="result-brix-corrigido" style="display:none;">
                                    <div class="result-item">
                                        <div class="result-label">Brix Corrigido:</div>
                                        <div class="result-value" id="valor-brix-corrigido">0.00 °Bx</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 5. Peso Bruto -->
                        <div class="tab-pane fade" id="peso-bruto" role="tabpanel">
                            <div class="tab-description">
                                Calcula o peso bruto adicionando o peso da embalagem ao peso líquido.
                            </div>
                            
                            <div class="formula-box">
                                <div class="formula-title">Fórmula:</div>
                                <div>Peso Bruto = Peso Líquido + Peso Embalagem</div>
                            </div>
                            
                            <div class="calculation-group">
                                <form id="form-peso-bruto">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="form-label">Peso Líquido:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="peso_liquido" step="0.01" required>
                                                    <span class="input-unit">kg</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="form-label">Peso Embalagem:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="peso_embalagem" step="0.01" required>
                                                    <span class="input-unit">kg</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="row mt-3">
                                        <div class="col-12 text-end">
                                            <button type="button" class="btn btn-light me-2 btn-limpar">Limpar</button>
                                            <button type="button" class="btn btn-calculate" id="calcular-peso-bruto">
                                                <span class="loader"></span> Calcular
                                            </button>
                                        </div>
                                    </div>
                                </form>
                                
                                <div class="result-box mt-4" id="result-peso-bruto" style="display:none;">
                                    <div class="result-item">
                                        <div class="result-label">Peso Bruto:</div>
                                        <div class="result-value" id="valor-peso-bruto">0.00 kg</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 6. Corantes -->
                        <div class="tab-pane fade" id="corantes" role="tabpanel">
                            <div class="tab-description">
                                Calcula a quantidade de corante necessária para atingir a concentração desejada.
                            </div>
                            
                            <div class="formula-box">
                                <div class="formula-title">Fórmula:</div>
                                <div>Quantidade Corante = (Volume × Concentração Desejada) ÷ Concentração Corante</div>
                            </div>
                            
                            <div class="calculation-group">
                                <form id="form-corantes">
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label class="form-label">Volume Total:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="volume" step="0.1" required>
                                                    <span class="input-unit">L</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label class="form-label">Concentração Desejada:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="concentracao_desejada" step="0.001" required>
                                                    <span class="input-unit">%</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label class="form-label">Concentração do Corante:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="concentracao_corante" step="0.1" value="100" required>
                                                    <span class="input-unit">%</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="row mt-3">
                                        <div class="col-12 text-end">
                                            <button type="button" class="btn btn-light me-2 btn-limpar">Limpar</button>
                                            <button type="button" class="btn btn-calculate" id="calcular-corantes">
                                                <span class="loader"></span> Calcular
                                            </button>
                                        </div>
                                    </div>
                                </form>
                                
                                <div class="result-box mt-4" id="result-corantes" style="display:none;">
                                    <div class="result-item">
                                        <div class="result-label">Quantidade de Corante:</div>
                                        <div class="result-value" id="valor-corantes">0.00 L</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 7. Densidade -->
                        <div class="tab-pane fade" id="densidade" role="tabpanel">
                            <div class="tab-description">
                                Calcula a densidade de um material com base em seu peso e volume.
                            </div>
                            
                            <div class="formula-box">
                                <div class="formula-title">Fórmula:</div>
                                <div>Densidade = Peso ÷ Volume</div>
                            </div>
                            
                            <div class="calculation-group">
                                <form id="form-densidade">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="form-label">Peso:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="peso" step="0.01" required>
                                                    <span class="input-unit">g</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="form-label">Volume:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="volume" step="0.01" required>
                                                    <span class="input-unit">mL</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="row mt-3">
                                        <div class="col-12 text-end">
                                            <button type="button" class="btn btn-light me-2 btn-limpar">Limpar</button>
                                            <button type="button" class="btn btn-calculate" id="calcular-densidade">
                                                <span class="loader"></span> Calcular
                                            </button>
                                        </div>
                                    </div>
                                </form>
                                
                                <div class="result-box mt-4" id="result-densidade" style="display:none;">
                                    <div class="result-item">
                                        <div class="result-label">Densidade:</div>
                                        <div class="result-value" id="valor-densidade">0.000 g/mL</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 8. Ratio -->
                        <div class="tab-pane fade" id="ratio" role="tabpanel">
                            <div class="tab-description">
                                Calcula o ratio (razão entre Brix e Acidez), um importante indicador de qualidade.
                            </div>
                            
                            <div class="formula-box">
                                <div class="formula-title">Fórmula:</div>
                                <div>Ratio = Brix ÷ Acidez</div>
                            </div>
                            
                            <div class="calculation-group">
                                <form id="form-ratio">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="form-label">Brix:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="brix_atual" step="0.1" required>
                                                    <span class="input-unit">°Bx</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="form-label">Acidez:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="acidez" step="0.01" required>
                                                    <span class="input-unit">%</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="row mt-3">
                                        <div class="col-12 text-end">
                                            <button type="button" class="btn btn-light me-2 btn-limpar">Limpar</button>
                                            <button type="button" class="btn btn-calculate" id="calcular-ratio">
                                                <span class="loader"></span> Calcular
                                            </button>
                                        </div>
                                    </div>
                                </form>
                                
                                <div class="result-box mt-4" id="result-ratio" style="display:none;">
                                    <div class="result-item">
                                        <div class="result-label">Ratio:</div>
                                        <div class="result-value" id="valor-ratio">0.00</div>
                                    </div>
                                    <div class="result-item">
                                        <div class="result-label">Classificação:</div>
                                        <div class="result-value" id="valor-ratio-classificacao">-</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 9. Ratio - Brix -->
                        <div class="tab-pane fade" id="ratio-brix" role="tabpanel">
                            <div class="tab-description">
                                Calcula o valor de Brix a partir de um ratio desejado e acidez conhecida.
                            </div>
                            
                            <div class="formula-box">
                                <div class="formula-title">Fórmula:</div>
                                <div>Brix = Ratio × Acidez</div>
                            </div>
                            
                            <div class="calculation-group">
                                <form id="form-ratio-brix">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="form-label">Ratio Desejado:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="ratio" step="0.1" required>
                                                    <span class="input-unit"></span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="form-label">Acidez:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="acidez" step="0.01" required>
                                                    <span class="input-unit">%</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="row mt-3">
                                        <div class="col-12 text-end">
                                            <button type="button" class="btn btn-light me-2 btn-limpar">Limpar</button>
                                            <button type="button" class="btn btn-calculate" id="calcular-ratio-brix">
                                                <span class="loader"></span> Calcular
                                            </button>
                                        </div>
                                    </div>
                                </form>
                                
                                <div class="result-box mt-4" id="result-ratio-brix" style="display:none;">
                                    <div class="result-item">
                                        <div class="result-label">Brix Calculado:</div>
                                        <div class="result-value" id="valor-ratio-brix">0.00 °Bx</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 10. Ratio - Acidez -->
                        <div class="tab-pane fade" id="ratio-acidez" role="tabpanel">
                            <div class="tab-description">
                                Calcula a acidez necessária para atingir um ratio desejado com um brix conhecido.
                            </div>
                            
                            <div class="formula-box">
                                <div class="formula-title">Fórmula:</div>
                                <div>Acidez = Brix ÷ Ratio</div>
                            </div>
                            
                            <div class="calculation-group">
                                <form id="form-ratio-acidez">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="form-label">Brix Atual:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="brix_atual" step="0.1" required>
                                                    <span class="input-unit">°Bx</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="form-label">Ratio Desejado:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="ratio" step="0.1" required>
                                                    <span class="input-unit"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="row mt-3">
                                        <div class="col-12 text-end">
                                            <button type="button" class="btn btn-light me-2 btn-limpar">Limpar</button>
                                            <button type="button" class="btn btn-calculate" id="calcular-ratio-acidez">
                                                <span class="loader"></span> Calcular
                                            </button>
                                        </div>
                                    </div>
                                </form>
                                
                                <div class="result-box mt-4" id="result-ratio-acidez" style="display:none;">
                                    <div class="result-item">
                                        <div class="result-label">Acidez Necessária:</div>
                                        <div class="result-value" id="valor-ratio-acidez">0.00 %</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 11. Acidez (%) -->
                        <div class="tab-pane fade" id="acidez" role="tabpanel">
                            <div class="tab-description">
                                Calcula a acidez percentual a partir do volume de titulante e normalidade.
                            </div>
                            
                            <div class="formula-box">
                                <div class="formula-title">Fórmula:</div>
                                <div>Acidez (%) = (Volume Titulante × Normalidade × 0.064) ÷ Volume Amostra</div>
                            </div>
                            
                            <div class="calculation-group">
                                <form id="form-acidez">
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label class="form-label">Volume Titulante:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="volume_titulante" step="0.1" required>
                                                    <span class="input-unit">mL</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label class="form-label">Normalidade:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="normalidade" step="0.01" value="0.1" required>
                                                    <span class="input-unit">N</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label class="form-label">Volume Amostra:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="volume_amostra" step="0.1" value="10" required>
                                                    <span class="input-unit">mL</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="row mt-3">
                                        <div class="col-12 text-end">
                                            <button type="button" class="btn btn-light me-2 btn-limpar">Limpar</button>
                                            <button type="button" class="btn btn-calculate" id="calcular-acidez">
                                                <span class="loader"></span> Calcular
                                            </button>
                                        </div>
                                    </div>
                                </form>
                                
                                <div class="result-box mt-4" id="result-acidez" style="display:none;">
                                    <div class="result-item">
                                        <div class="result-label">Acidez:</div>
                                        <div class="result-value" id="valor-acidez">0.00 %</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 12. Cálculo de Soda -->
                        <div class="tab-pane fade" id="calculo-soda" role="tabpanel">
                            <div class="tab-description">
                                Calcula a quantidade de soda necessária para neutralizar acidez em um volume de produto.
                            </div>
                            
                            <div class="formula-box">
                                <div class="formula-title">Fórmula:</div>
                                <div>Quantidade de Soda = (Volume × Acidez Atual) ÷ (Concentração Soda × 100)</div>
                            </div>
                            
                            <div class="calculation-group">
                                <form id="form-calculo-soda">
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label class="form-label">Volume:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="volume" step="0.1" required>
                                                    <span class="input-unit">L</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label class="form-label">Acidez Atual:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="acidez_atual" step="0.01" required>
                                                    <span class="input-unit">%</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label class="form-label">Concentração Soda:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="concentracao_soda" step="0.1" value="50" required>
                                                    <span class="input-unit">%</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="row mt-3">
                                        <div class="col-12 text-end">
                                            <button type="button" class="btn btn-light me-2 btn-limpar">Limpar</button>
                                            <button type="button" class="btn btn-calculate" id="calcular-calculo-soda">
                                                <span class="loader"></span> Calcular
                                            </button>
                                        </div>
                                    </div>
                                </form>
                                
                                <div class="result-box mt-4" id="result-calculo-soda" style="display:none;">
                                    <div class="result-item">
                                        <div class="result-label">Quantidade de Soda:</div>
                                        <div class="result-value" id="valor-calculo-soda">0.00 L</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 13. Vitamina C -->
                        <div class="tab-pane fade" id="vitamina-c" role="tabpanel">
                            <div class="tab-description">
                                Calcula a concentração de vitamina C em uma amostra.
                            </div>
                            
                            <div class="formula-box">
                                <div class="formula-title">Fórmula:</div>
                                <div>Vitamina C (mg/L) = (Volume Titulante × Fator) ÷ Volume Amostra</div>
                            </div>
                            
                            <div class="calculation-group">
                                <form id="form-vitamina-c">
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label class="form-label">Volume Titulante:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="volume_titulante" step="0.1" required>
                                                    <span class="input-unit">mL</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label class="form-label">Fator:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="fator" step="0.01" value="1" required>
                                                    <span class="input-unit"></span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label class="form-label">Volume Amostra:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="volume_amostra" step="0.1" value="10" required>
                                                    <span class="input-unit">mL</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="row mt-3">
                                        <div class="col-12 text-end">
                                            <button type="button" class="btn btn-light me-2 btn-limpar">Limpar</button>
                                            <button type="button" class="btn btn-calculate" id="calcular-vitamina-c">
                                                <span class="loader"></span> Calcular
                                            </button>
                                        </div>
                                    </div>
                                </form>
                                
                                <div class="result-box mt-4" id="result-vitamina-c" style="display:none;">
                                    <div class="result-item">
                                        <div class="result-label">Vitamina C:</div>
                                        <div class="result-value" id="valor-vitamina-c">0.00 mg/L</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 14. Soda-Diversey -->
                        <div class="tab-pane fade" id="soda-diversey" role="tabpanel">
                            <div class="tab-description">
                                Calcula a quantidade de soda Diversey necessária para neutralizar acidez.
                            </div>
                            
                            <div class="formula-box">
                                <div class="formula-title">Fórmula:</div>
                                <div>Quantidade Soda Diversey = (Volume × Acidez Atual) ÷ (Concentração Soda × 100)</div>
                            </div>
                            
                            <div class="calculation-group">
                                <form id="form-soda-diversey">
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label class="form-label">Volume:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="volume" step="0.1" required>
                                                    <span class="input-unit">L</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label class="form-label">Acidez Atual:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="acidez_atual" step="0.01" required>
                                                    <span class="input-unit">%</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label class="form-label">Concentração Soda:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="concentracao_soda" step="0.1" value="50" required>
                                                    <span class="input-unit">%</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="row mt-3">
                                        <div class="col-12 text-end">
                                            <button type="button" class="btn btn-light me-2 btn-limpar">Limpar</button>
                                            <button type="button" class="btn btn-calculate" id="calcular-soda-diversey">
                                                <span class="loader"></span> Calcular
                                            </button>
                                        </div>
                                    </div>
                                </form>
                                
                                <div class="result-box mt-4" id="result-soda-diversey" style="display:none;">
                                    <div class="result-item">
                                        <div class="result-label">Quantidade de Soda Diversey:</div>
                                        <div class="result-value" id="valor-soda-diversey">0.00 L</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 15. Ácido-Diversey -->
                        <div class="tab-pane fade" id="acido-diversey" role="tabpanel">
                            <div class="tab-description">
                                Calcula a acidez em soluções para produtos Diversey.
                            </div>
                            
                            <div class="formula-box">
                                <div class="formula-title">Fórmula:</div>
                                <div>Acidez Diversey (%) = (Volume Titulante × Normalidade × 0.064) ÷ Volume Amostra</div>
                            </div>
                            
                            <div class="calculation-group">
                                <form id="form-acido-diversey">
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label class="form-label">Volume Titulante:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="volume_titulante" step="0.1" required>
                                                    <span class="input-unit">mL</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label class="form-label">Normalidade:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="normalidade" step="0.01" value="0.1" required>
                                                    <span class="input-unit">N</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label class="form-label">Volume Amostra:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="volume_amostra" step="0.1" value="10" required>
                                                    <span class="input-unit">mL</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="row mt-3">
                                        <div class="col-12 text-end">
                                            <button type="button" class="btn btn-light me-2 btn-limpar">Limpar</button>
                                            <button type="button" class="btn btn-calculate" id="calcular-acido-diversey">
                                                <span class="loader"></span> Calcular
                                            </button>
                                        </div>
                                    </div>
                                </form>
                                
                                <div class="result-box mt-4" id="result-acido-diversey" style="display:none;">
                                    <div class="result-item">
                                        <div class="result-label">Acidez Diversey:</div>
                                        <div class="result-value" id="valor-acido-diversey">0.00 %</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 16. Perda de Base -->
                        <div class="tab-pane fade" id="perda-base" role="tabpanel">
                            <div class="tab-description">
                                Calcula a porcentagem de perda de base entre volumes inicial e final.
                            </div>
                            
                            <div class="formula-box">
                                <div class="formula-title">Fórmula:</div>
                                <div>Perda de Base (%) = ((Volume Inicial - Volume Final) ÷ Volume Inicial) × 100</div>
                            </div>
                            
                            <div class="calculation-group">
                                <form id="form-perda-base">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="form-label">Volume Inicial:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="volume_inicial" step="0.1" required>
                                                    <span class="input-unit">L</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="form-label">Volume Final:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="volume_final" step="0.1" required>
                                                    <span class="input-unit">L</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="row mt-3">
                                        <div class="col-12 text-end">
                                            <button type="button" class="btn btn-light me-2 btn-limpar">Limpar</button>
                                            <button type="button" class="btn btn-calculate" id="calcular-perda-base">
                                                <span class="loader"></span> Calcular
                                            </button>
                                        </div>
                                    </div>
                                </form>
                                
                                <div class="result-box mt-4" id="result-perda-base" style="display:none;">
                                    <div class="result-item">
                                        <div class="result-label">Perda de Base:</div>
                                        <div class="result-value" id="valor-perda-base">0.00 %</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 17. Qtd. Açúcar a Puxar -->
                        <div class="tab-pane fade" id="acucar-puxar" role="tabpanel">
                            <div class="tab-description">
                                Calcula a quantidade de açúcar necessária para aumentar o Brix de um volume de produto.
                            </div>
                            
                            <div class="formula-box">
                                <div class="formula-title">Fórmula:</div>
                                <div>Qtd. Açúcar = ((Brix Desejado - Brix Atual) × Volume × Densidade) ÷ 100</div>
                            </div>
                            
                            <div class="calculation-group">
                                <form id="form-acucar-puxar">
                                    <div class="row">
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label class="form-label">Brix Atual:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="brix_atual" step="0.1" required>
                                                    <span class="input-unit">°Bx</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label class="form-label">Brix Desejado:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="brix_desejado" step="0.1" required>
                                                    <span class="input-unit">°Bx</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label class="form-label">Volume:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="volume" step="0.1" required>
                                                    <span class="input-unit">L</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label class="form-label">Densidade:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="densidade" step="0.001" value="1.0" required>
                                                    <span class="input-unit">g/mL</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="row mt-3">
                                        <div class="col-12 text-end">
                                            <button type="button" class="btn btn-light me-2 btn-limpar">Limpar</button>
                                            <button type="button" class="btn btn-calculate" id="calcular-acucar-puxar">
                                                <span class="loader"></span> Calcular
                                            </button>
                                        </div>
                                    </div>
                                </form>
                                
                                <div class="result-box mt-4" id="result-acucar-puxar" style="display:none;">
                                    <div class="result-item">
                                        <div class="result-label">Quantidade de Açúcar:</div>
                                        <div class="result-value" id="valor-acucar-puxar">0.00 kg</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 18. Aumentar Brix Açúcar Batido -->
                        <div class="tab-pane fade" id="acucar-batido" role="tabpanel">
                            <div class="tab-description">
                                Calcula a quantidade de açúcar batido necessária para aumentar o Brix.
                            </div>
                            
                            <div class="formula-box">
                                <div class="formula-title">Fórmula:</div>
                                <div>Qtd. Açúcar Batido = ((Brix Desejado - Brix Atual) × Volume × Densidade) ÷ 100</div>
                            </div>
                            
                            <div class="calculation-group">
                                <form id="form-acucar-batido">
                                    <div class="row">
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label class="form-label">Brix Atual:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="brix_atual" step="0.1" required>
                                                    <span class="input-unit">°Bx</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label class="form-label">Brix Desejado:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="brix_desejado" step="0.1" required>
                                                    <span class="input-unit">°Bx</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label class="form-label">Volume:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="volume" step="0.1" required>
                                                    <span class="input-unit">L</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label class="form-label">Densidade:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="densidade" step="0.001" value="1.0" required>
                                                    <span class="input-unit">g/mL</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="row mt-3">
                                        <div class="col-12 text-end">
                                            <button type="button" class="btn btn-light me-2 btn-limpar">Limpar</button>
                                            <button type="button" class="btn btn-calculate" id="calcular-acucar-batido">
                                                <span class="loader"></span> Calcular
                                            </button>
                                        </div>
                                    </div>
                                </form>
                                
                                <div class="result-box mt-4" id="result-acucar-batido" style="display:none;">
                                    <div class="result-item">
                                        <div class="result-label">Quantidade de Açúcar Batido:</div>
                                        <div class="result-value" id="valor-acucar-batido">0.00 kg</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 19. Previsão Brix -->
                        <div class="tab-pane fade" id="previsao-brix" role="tabpanel">
                            <div class="tab-description">
                                Calcula o Brix previsto para uma mistura de dois produtos com Brix conhecidos.
                            </div>
                            
                            <div class="formula-box">
                                <div class="formula-title">Fórmula:</div>
                                <div>Brix Previsto = (Brix1 × Vol1 + Brix2 × Vol2) ÷ (Vol1 + Vol2)</div>
                            </div>
                            
                            <div class="calculation-group">
                                <form id="form-previsao-brix">
                                    <div class="row">
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label class="form-label">Brix Produto 1:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="brix1" step="0.1" required>
                                                    <span class="input-unit">°Bx</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label class="form-label">Volume Produto 1:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="vol1" step="0.1" required>
                                                    <span class="input-unit">L</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label class="form-label">Brix Produto 2:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="brix2" step="0.1" required>
                                                    <span class="input-unit">°Bx</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label class="form-label">Volume Produto 2:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="vol2" step="0.1" required>
                                                    <span class="input-unit">L</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="row mt-3">
                                        <div class="col-12 text-end">
                                            <button type="button" class="btn btn-light me-2 btn-limpar">Limpar</button>
                                            <button type="button" class="btn btn-calculate" id="calcular-previsao-brix">
                                                <span class="loader"></span> Calcular
                                            </button>
                                        </div>
                                    </div>
                                </form>
                                
                                <div class="result-box mt-4" id="result-previsao-brix" style="display:none;">
                                    <div class="result-item">
                                        <div class="result-label">Brix Previsto:</div>
                                        <div class="result-value" id="valor-previsao-brix">0.00 °Bx</div>
                                    </div>
                                    <div class="result-item">
                                        <div class="result-label">Volume Total:</div>
                                        <div class="result-value" id="valor-previsao-brix-vol">0.00 L</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 20. Previsão Acidez -->
                        <div class="tab-pane fade" id="previsao-acidez" role="tabpanel">
                            <div class="tab-description">
                                Calcula a acidez prevista para uma mistura de dois produtos com acidez conhecida.
                            </div>
                            
                            <div class="formula-box">
                                <div class="formula-title">Fórmula:</div>
                                <div>Acidez Prevista = (Acidez1 × Vol1 + Acidez2 × Vol2) ÷ (Vol1 + Vol2)</div>
                            </div>
                            
                            <div class="calculation-group">
                                <form id="form-previsao-acidez">
                                    <div class="row">
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label class="form-label">Acidez Produto 1:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="acidez1" step="0.01" required>
                                                    <span class="input-unit">%</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label class="form-label">Volume Produto 1:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="vol1" step="0.1" required>
                                                    <span class="input-unit">L</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label class="form-label">Acidez Produto 2:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="acidez2" step="0.01" required>
                                                    <span class="input-unit">%</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label class="form-label">Volume Produto 2:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="vol2" step="0.1" required>
                                                    <span class="input-unit">L</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="row mt-3">
                                        <div class="col-12 text-end">
                                            <button type="button" class="btn btn-light me-2 btn-limpar">Limpar</button>
                                            <button type="button" class="btn btn-calculate" id="calcular-previsao-acidez">
                                                <span class="loader"></span> Calcular
                                            </button>
                                        </div>
                                    </div>
                                </form>
                                
                                <div class="result-box mt-4" id="result-previsao-acidez" style="display:none;">
                                    <div class="result-item">
                                        <div class="result-label">Acidez Prevista:</div>
                                        <div class="result-value" id="valor-previsao-acidez">0.00 %</div>
                                    </div>
                                    <div class="result-item">
                                        <div class="result-label">Volume Total:</div>
                                        <div class="result-value" id="valor-previsao-acidez-vol">0.00 L</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 21. Tempo de Finalização -->
                        <div class="tab-pane fade" id="tempo-finalizacao" role="tabpanel">
                            <div class="tab-description">
                                Calcula o tempo estimado para finalizar um processo com base no volume e vazão.
                            </div>
                            
                            <div class="formula-box">
                                <div class="formula-title">Fórmula:</div>
                                <div>Tempo de Finalização = Volume ÷ Vazão</div>
                            </div>
                            
                            <div class="calculation-group">
                                <form id="form-tempo-finalizacao">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="form-label">Volume:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="volume" step="0.1" required>
                                                    <span class="input-unit">L</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="form-label">Vazão:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="vazao" step="0.1" required>
                                                    <span class="input-unit">L/min</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="row mt-3">
                                        <div class="col-12 text-end">
                                            <button type="button" class="btn btn-light me-2 btn-limpar">Limpar</button>
                                            <button type="button" class="btn btn-calculate" id="calcular-tempo-finalizacao">
                                                <span class="loader"></span> Calcular
                                            </button>
                                        </div>
                                    </div>
                                </form>
                                
                                <div class="result-box mt-4" id="result-tempo-finalizacao" style="display:none;">
                                    <div class="result-item">
                                        <div class="result-label">Tempo de Finalização:</div>
                                        <div class="result-value" id="valor-tempo-finalizacao">0.00 min</div>
                                    </div>
                                    <div class="result-item">
                                        <div class="result-label">Convertido:</div>
                                        <div class="result-value" id="valor-tempo-finalizacao-conv">00:00 h:min</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 22. Aumentar Acidez -->
                        <div class="tab-pane fade" id="aumentar-acidez" role="tabpanel">
                            <div class="tab-description">
                                Calcula a quantidade de ácido necessária para aumentar a acidez de um produto.
                            </div>
                            
                            <div class="formula-box">
                                <div class="formula-title">Fórmula:</div>
                                <div>Quantidade de Ácido = (Acidez Desejada - Acidez Atual) × Volume × Fator</div>
                            </div>
                            
                            <div class="calculation-group">
                                <form id="form-aumentar-acidez">
                                    <div class="row">
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label class="form-label">Acidez Atual:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="acidez_atual" step="0.01" required>
                                                    <span class="input-unit">%</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label class="form-label">Acidez Desejada:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="acidez_desejada" step="0.01" required>
                                                    <span class="input-unit">%</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label class="form-label">Volume:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="volume" step="0.1" required>
                                                    <span class="input-unit">L</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label class="form-label">Fator:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="fator" step="0.01" value="1" required>
                                                    <span class="input-unit"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="row mt-3">
                                        <div class="col-12 text-end">
                                            <button type="button" class="btn btn-light me-2 btn-limpar">Limpar</button>
                                            <button type="button" class="btn btn-calculate" id="calcular-aumentar-acidez">
                                                <span class="loader"></span> Calcular
                                            </button>
                                        </div>
                                    </div>
                                </form>
                                
                                <div class="result-box mt-4" id="result-aumentar-acidez" style="display:none;">
                                    <div class="result-item">
                                        <div class="result-label">Quantidade de Ácido:</div>
                                        <div class="result-value" id="valor-aumentar-acidez">0.00 L</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 23. Diminuir Acidez -->
                        <div class="tab-pane fade" id="diminuir-acidez" role="tabpanel">
                            <div class="tab-description">
                                Calcula o novo volume necessário para diminuir a acidez de um produto por diluição.
                            </div>
                            
                            <div class="formula-box">
                                <div class="formula-title">Fórmula:</div>
                                <div>Novo Volume = (Volume Atual × Acidez Atual) ÷ Acidez Desejada</div>
                            </div>
                            
                            <div class="calculation-group">
                                <form id="form-diminuir-acidez">
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label class="form-label">Volume Atual:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="volume_atual" step="0.1" required>
                                                    <span class="input-unit">L</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label class="form-label">Acidez Atual:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="acidez_atual" step="0.01" required>
                                                    <span class="input-unit">%</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label class="form-label">Acidez Desejada:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="acidez_desejada" step="0.01" required>
                                                    <span class="input-unit">%</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="row mt-3">
                                        <div class="col-12 text-end">
                                            <button type="button" class="btn btn-light me-2 btn-limpar">Limpar</button>
                                            <button type="button" class="btn btn-calculate" id="calcular-diminuir-acidez">
                                                <span class="loader"></span> Calcular
                                            </button>
                                        </div>
                                    </div>
                                </form>
                                
                                <div class="result-box mt-4" id="result-diminuir-acidez" style="display:none;">
                                    <div class="result-item">
                                        <div class="result-label">Novo Volume:</div>
                                        <div class="result-value" id="valor-diminuir-acidez">0.00 L</div>
                                    </div>
                                    <div class="result-item">
                                        <div class="result-label">Água a Adicionar:</div>
                                        <div class="result-value" id="valor-diminuir-acidez-agua">0.00 L</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 24. Correção de Brix -->
                        <div class="tab-pane fade" id="correcao-brix" role="tabpanel">
                            <div class="tab-description">
                                Calcula o novo volume necessário para corrigir o Brix de um produto por diluição.
                            </div>
                            
                            <div class="formula-box">
                                <div class="formula-title">Fórmula:</div>
                                <div>Novo Volume = (Brix Inicial × Volume Inicial) ÷ Brix Desejado</div>
                            </div>
                            
                            <div class="calculation-group">
                                <form id="form-correcao-brix">
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label class="form-label">Brix Inicial:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="brix_inicial" step="0.1" required>
                                                    <span class="input-unit">°Bx</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label class="form-label">Volume Inicial:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="volume_inicial" step="0.1" required>
                                                    <span class="input-unit">L</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label class="form-label">Brix Desejado:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="brix_desejado" step="0.1" required>
                                                    <span class="input-unit">°Bx</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="row mt-3">
                                        <div class="col-12 text-end">
                                            <button type="button" class="btn btn-light me-2 btn-limpar">Limpar</button>
                                            <button type="button" class="btn btn-calculate" id="calcular-correcao-brix">
                                                <span class="loader"></span> Calcular
                                            </button>
                                        </div>
                                    </div>
                                </form>
                                
                                <div class="result-box mt-4" id="result-correcao-brix" style="display:none;">
                                    <div class="result-item">
                                        <div class="result-label">Novo Volume:</div>
                                        <div class="result-value" id="valor-correcao-brix">0.00 L</div>
                                    </div>
                                    <div class="result-item">
                                        <div class="result-label">Água a Adicionar:</div>
                                        <div class="result-value" id="valor-correcao-brix-agua">0.00 L</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 25. Conversão Cristal Líquido -->
                        <div class="tab-pane fade" id="cristal-liquido" role="tabpanel">
                            <div class="tab-description">
                                Calcula o volume de solução resultante da diluição de açúcar cristal.
                            </div>
                            
                            <div class="formula-box">
                                <div class="formula-title">Fórmula:</div>
                                <div>Volume Solução = Açúcar Cristal ÷ Densidade</div>
                            </div>
                            
                            <div class="calculation-group">
                                <form id="form-cristal-liquido">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="form-label">Açúcar Cristal:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="acucar_cristal" step="0.1" required>
                                                    <span class="input-unit">kg</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="form-label">Densidade:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="densidade" step="0.001" value="1.0" required>
                                                    <span class="input-unit">g/mL</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="row mt-3">
                                        <div class="col-12 text-end">
                                            <button type="button" class="btn btn-light me-2 btn-limpar">Limpar</button>
                                            <button type="button" class="btn btn-calculate" id="calcular-cristal-liquido">
                                                <span class="loader"></span> Calcular
                                            </button>
                                        </div>
                                    </div>
                                </form>
                                
                                <div class="result-box mt-4" id="result-cristal-liquido" style="display:none;">
                                    <div class="result-item">
                                        <div class="result-label">Volume de Solução:</div>
                                        <div class="result-value" id="valor-cristal-liquido">0.00 L</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 26. Correção Açúcar Cristal -->
                        <div class="tab-pane fade" id="correcao-acucar" role="tabpanel">
                            <div class="tab-description">
                                Calcula a quantidade de açúcar cristal necessária para corrigir o Brix.
                            </div>
                            
                            <div class="formula-box">
                                <div class="formula-title">Fórmula:</div>
                                <div>Qtd. Açúcar Cristal = (Brix Desejado - Brix Atual) × Volume ÷ 100</div>
                            </div>
                            
                            <div class="calculation-group">
                                <form id="form-correcao-acucar">
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label class="form-label">Brix Atual:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="brix_atual" step="0.1" required>
                                                    <span class="input-unit">°Bx</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label class="form-label">Brix Desejado:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="brix_desejado" step="0.1" required>
                                                    <span class="input-unit">°Bx</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label class="form-label">Volume:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="volume" step="0.1" required>
                                                    <span class="input-unit">L</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="row mt-3">
                                        <div class="col-12 text-end">
                                            <button type="button" class="btn btn-light me-2 btn-limpar">Limpar</button>
                                            <button type="button" class="btn btn-calculate" id="calcular-correcao-acucar">
                                                <span class="loader"></span> Calcular
                                            </button>
                                        </div>
                                    </div>
                                </form>
                                
                                <div class="result-box mt-4" id="result-correcao-acucar" style="display:none;">
                                    <div class="result-item">
                                        <div class="result-label">Quantidade de Açúcar Cristal:</div>
                                        <div class="result-value" id="valor-correcao-acucar">0.00 kg</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 27. Conversão Líquido - Cristal -->
                        <div class="tab-pane fade" id="liquido-cristal" role="tabpanel">
                            <div class="tab-description">
                                Calcula o peso de açúcar cristal obtido a partir de um volume de solução.
                            </div>
                            
                            <div class="formula-box">
                                <div class="formula-title">Fórmula:</div>
                                <div>Peso Cristal = Volume Solução × Densidade × (Percentual Açúcar ÷ 100)</div>
                            </div>
                            
                            <div class="calculation-group">
                                <form id="form-liquido-cristal">
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label class="form-label">Volume Solução:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="volume_solucao" step="0.1" required>
                                                    <span class="input-unit">L</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label class="form-label">Densidade:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="densidade" step="0.001" value="1.0" required>
                                                    <span class="input-unit">g/mL</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label class="form-label">Percentual de Açúcar:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="percentual_acucar" step="0.1" required>
                                                    <span class="input-unit">%</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="row mt-3">
                                        <div class="col-12 text-end">
                                            <button type="button" class="btn btn-light me-2 btn-limpar">Limpar</button>
                                            <button type="button" class="btn btn-calculate" id="calcular-liquido-cristal">
                                                <span class="loader"></span> Calcular
                                            </button>
                                        </div>
                                    </div>
                                </form>
                                
                                <div class="result-box mt-4" id="result-liquido-cristal" style="display:none;">
                                    <div class="result-item">
                                        <div class="result-label">Peso de Açúcar Cristal:</div>
                                        <div class="result-value" id="valor-liquido-cristal">0.00 kg</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 28. Peso Líquido 200 -->
                        <div class="tab-pane fade" id="peso-liquido-200" role="tabpanel">
                            <div class="tab-description">
                                Calcula o peso líquido de um produto subtraindo a tara do peso bruto.
                            </div>
                            
                            <div class="formula-box">
                                <div class="formula-title">Fórmula:</div>
                                <div>Peso Líquido = Peso Bruto - Tara</div>
                            </div>
                            
                            <div class="calculation-group">
                                <form id="form-peso-liquido-200">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="form-label">Peso Bruto:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="peso_bruto" step="0.001" required>
                                                    <span class="input-unit">kg</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="form-label">Tara:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="tara" step="0.001" required>
                                                    <span class="input-unit">kg</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="row mt-3">
                                        <div class="col-12 text-end">
                                            <button type="button" class="btn btn-light me-2 btn-limpar">Limpar</button>
                                            <button type="button" class="btn btn-calculate" id="calcular-peso-liquido-200">
                                                <span class="loader"></span> Calcular
                                            </button>
                                        </div>
                                    </div>
                                </form>
                                
                                <div class="result-box mt-4" id="result-peso-liquido-200" style="display:none;">
                                    <div class="result-item">
                                        <div class="result-label">Peso Líquido:</div>
                                        <div class="result-value" id="valor-peso-liquido-200">0.000 kg</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 29. Peso Líquido Litro -->
                        <div class="tab-pane fade" id="peso-liquido-litro" role="tabpanel">
                            <div class="tab-description">
                                Calcula o volume líquido a partir do peso líquido e densidade. Também pode calcular o peso líquido zerando a embalagem.
                            </div>
                            
                            <div class="formula-box">
                                <div class="formula-title">Fórmulas:</div>
                                <div>Volume Líquido = Peso Líquido ÷ Densidade</div>
                                <div>Peso Líquido (Zeragem) = Peso Total - Embalagem</div>
                            </div>
                            
                            <div class="calculation-group">
                                <form id="form-peso-liquido-litro">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="form-label">Peso Líquido:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="peso_liquido" step="0.01" required>
                                                    <span class="input-unit">kg</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="form-label">Densidade:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="densidade" step="0.001" value="1.0" required>
                                                    <span class="input-unit">g/mL</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="row mt-4">
                                        <div class="col-12">
                                            <h5>Zeragem de Embalagem</h5>
                                        </div>
                                    </div>
                                    
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="form-label">Peso Total:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="peso_total" step="0.01">
                                                    <span class="input-unit">kg</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="form-label">Peso Embalagem:</label>
                                                <div class="input-with-unit">
                                                    <input type="number" class="form-control" name="embalagem" step="0.01">
                                                    <span class="input-unit">kg</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="row mt-3">
                                        <div class="col-12 text-end">
                                            <button type="button" class="btn btn-light me-2 btn-limpar">Limpar</button>
                                            <button type="button" class="btn btn-calculate" id="calcular-peso-liquido-litro">
                                                <span class="loader"></span> Calcular
                                            </button>
                                        </div>
                                    </div>
                                </form>
                                
                                <div class="result-box mt-4" id="result-peso-liquido-litro" style="display:none;">
                                    <div class="result-item">
                                        <div class="result-label">Volume Líquido:</div>
                                        <div class="result-value" id="valor-volume-liquido">0.00 L</div>
                                    </div>
                                    <div class="result-item">
                                        <div class="result-label">Peso Líquido (Zeragem):</div>
                                        <div class="result-value" id="valor-peso-liquido-zeragem">0.00 kg</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="row mt-4">
        <div class="col-12">
            <div class="alert alert-info">
                <i class="fas fa-info-circle me-2"></i>
                <strong>Dica:</strong> Busque o cálculo desejado utilizando a barra de pesquisa no topo. Cada cálculo possui sua própria aba separada.
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // --- FUNÇÕES DE CÁLCULO PARA OS 29 CÁLCULOS ---
    
    // 1. Produção Final (200)
    const calcularProducaoFinal = function() {
        const pesoLiquido = parseFloat(document.querySelector('#form-producao-final [name="peso_liquido"]').value) || 0;
        const perdas = parseFloat(document.querySelector('#form-producao-final [name="perdas"]').value) || 0;
        
        const resultado = pesoLiquido - perdas;
        
        document.getElementById('valor-producao-final').textContent = resultado.toFixed(2) + ' kg';
        document.getElementById('result-producao-final').style.display = 'block';
    };
    
    // 2. Produção (Litro)
    const calcularProducaoLitro = function() {
        const pesoLiquido = parseFloat(document.querySelector('#form-producao-litro [name="peso_liquido"]').value) || 0;
        const densidade = parseFloat(document.querySelector('#form-producao-litro [name="densidade"]').value) || 1;
        
        if (densidade === 0) return;
        
        const resultado = pesoLiquido / densidade;
        
        document.getElementById('valor-producao-litro').textContent = resultado.toFixed(2) + ' L';
        document.getElementById('result-producao-litro').style.display = 'block';
    };
    
    // 3. Abaixar Brix
    const calcularAbaixarBrix = function() {
        const brixAtual = parseFloat(document.querySelector('#form-abaixar-brix [name="brix_atual"]').value) || 0;
        const brixDesejado = parseFloat(document.querySelector('#form-abaixar-brix [name="brix_desejado"]').value) || 0;
        const volumeAtual = parseFloat(document.querySelector('#form-abaixar-brix [name="volume_atual"]').value) || 0;
        
        if (brixDesejado === 0) return;
        
        const resultado = ((brixAtual - brixDesejado) * volumeAtual) / brixDesejado;
        
        document.getElementById('valor-abaixar-brix').textContent = resultado.toFixed(2) + ' L';
        document.getElementById('result-abaixar-brix').style.display = 'block';
    };
    
    // 4. Brix Corrigido
    const calcularBrixCorrigido = function() {
        const brixMedido = parseFloat(document.querySelector('#form-brix-corrigido [name="brix_medido"]').value) || 0;
        const temperatura = parseFloat(document.querySelector('#form-brix-corrigido [name="temperatura"]').value) || 20;
        
        const fatorCorrecao = 0.002 * (temperatura - 20);
        const resultado = brixMedido + fatorCorrecao;
        
        document.getElementById('valor-brix-corrigido').textContent = resultado.toFixed(2) + ' °Bx';
        document.getElementById('result-brix-corrigido').style.display = 'block';
    };
    
    // 5. Peso Bruto
    const calcularPesoBruto = function() {
        const pesoLiquido = parseFloat(document.querySelector('#form-peso-bruto [name="peso_liquido"]').value) || 0;
        const pesoEmbalagem = parseFloat(document.querySelector('#form-peso-bruto [name="peso_embalagem"]').value) || 0;
        
        const resultado = pesoLiquido + pesoEmbalagem;
        
        document.getElementById('valor-peso-bruto').textContent = resultado.toFixed(2) + ' kg';
        document.getElementById('result-peso-bruto').style.display = 'block';
    };
    
    // 6. Corantes
    const calcularCorantes = function() {
        const volume = parseFloat(document.querySelector('#form-corantes [name="volume"]').value) || 0;
        const concentracaoDesejada = parseFloat(document.querySelector('#form-corantes [name="concentracao_desejada"]').value) || 0;
        const concentracaoCorante = parseFloat(document.querySelector('#form-corantes [name="concentracao_corante"]').value) || 1;
        
        if (concentracaoCorante === 0) return;
        
        const resultado = (volume * concentracaoDesejada) / concentracaoCorante;
        
        document.getElementById('valor-corantes').textContent = resultado.toFixed(3) + ' L';
        document.getElementById('result-corantes').style.display = 'block';
    };
    
    // 7. Densidade
    const calcularDensidade = function() {
        const peso = parseFloat(document.querySelector('#form-densidade [name="peso"]').value) || 0;
        const volume = parseFloat(document.querySelector('#form-densidade [name="volume"]').value) || 0;
        
        if (volume === 0) return;
        
        const resultado = peso / volume;
        
        document.getElementById('valor-densidade').textContent = resultado.toFixed(3) + ' g/mL';
        document.getElementById('result-densidade').style.display = 'block';
    };
    
    // 8. Ratio
    const calcularRatio = function() {
        const brix = parseFloat(document.querySelector('#form-ratio [name="brix_atual"]').value) || 0;
        const acidez = parseFloat(document.querySelector('#form-ratio [name="acidez"]').value) || 0;
        
        if (acidez === 0) return;
        
        const resultado = brix / acidez;
        
        document.getElementById('valor-ratio').textContent = resultado.toFixed(2);
        
        // Classificação do ratio
        let classificacao = '';
        if (resultado < 12) {
            classificacao = 'Ácido';
        } else if (resultado >= 12 && resultado < 16) {
            classificacao = 'Equilibrado';
        } else {
            classificacao = 'Doce';
        }
        
        document.getElementById('valor-ratio-classificacao').textContent = classificacao;
        document.getElementById('result-ratio').style.display = 'block';
    };
    
    // 9. Ratio - Brix
    const calcularRatioBrix = function() {
        const ratio = parseFloat(document.querySelector('#form-ratio-brix [name="ratio"]').value) || 0;
        const acidez = parseFloat(document.querySelector('#form-ratio-brix [name="acidez"]').value) || 0;
        
        const resultado = ratio * acidez;
        
        document.getElementById('valor-ratio-brix').textContent = resultado.toFixed(2) + ' °Bx';
        document.getElementById('result-ratio-brix').style.display = 'block';
    };
    
    // 10. Ratio - Acidez
    const calcularRatioAcidez = function() {
        const brix = parseFloat(document.querySelector('#form-ratio-acidez [name="brix_atual"]').value) || 0;
        const ratio = parseFloat(document.querySelector('#form-ratio-acidez [name="ratio"]').value) || 0;
        
        if (ratio === 0) return;
        
        const resultado = brix / ratio;
        
        document.getElementById('valor-ratio-acidez').textContent = resultado.toFixed(3) + ' %';
        document.getElementById('result-ratio-acidez').style.display = 'block';
    };
    
    // 11. Acidez (%)
    const calcularAcidez = function() {
        const volumeTitulante = parseFloat(document.querySelector('#form-acidez [name="volume_titulante"]').value) || 0;
        const normalidade = parseFloat(document.querySelector('#form-acidez [name="normalidade"]').value) || 0.1;
        const volumeAmostra = parseFloat(document.querySelector('#form-acidez [name="volume_amostra"]').value) || 10;
        
        if (volumeAmostra === 0) return;
        
        const resultado = (volumeTitulante * normalidade * 0.064) / volumeAmostra;
        
        document.getElementById('valor-acidez').textContent = resultado.toFixed(3) + ' %';
        document.getElementById('result-acidez').style.display = 'block';
    };
    
    // 12. Cálculo de Soda
    const calcularCalculoSoda = function() {
        const volume = parseFloat(document.querySelector('#form-calculo-soda [name="volume"]').value) || 0;
        const acidezAtual = parseFloat(document.querySelector('#form-calculo-soda [name="acidez_atual"]').value) || 0;
        const concentracaoSoda = parseFloat(document.querySelector('#form-calculo-soda [name="concentracao_soda"]').value) || 50;
        
        if (concentracaoSoda === 0) return;
        
        const resultado = (volume * acidezAtual) / (concentracaoSoda * 100);
        
        document.getElementById('valor-calculo-soda').textContent = resultado.toFixed(3) + ' L';
        document.getElementById('result-calculo-soda').style.display = 'block';
    };
    
    // 13. Vitamina C
    const calcularVitaminaC = function() {
        const volumeTitulante = parseFloat(document.querySelector('#form-vitamina-c [name="volume_titulante"]').value) || 0;
        const fator = parseFloat(document.querySelector('#form-vitamina-c [name="fator"]').value) || 1;
        const volumeAmostra = parseFloat(document.querySelector('#form-vitamina-c [name="volume_amostra"]').value) || 10;
        
        if (volumeAmostra === 0) return;
        
        const resultado = (volumeTitulante * fator) / volumeAmostra;
        
        document.getElementById('valor-vitamina-c').textContent = resultado.toFixed(2) + ' mg/L';
        document.getElementById('result-vitamina-c').style.display = 'block';
    };
    
    // 14. Soda-Diversey
    const calcularSodaDiversey = function() {
        const volume = parseFloat(document.querySelector('#form-soda-diversey [name="volume"]').value) || 0;
        const acidezAtual = parseFloat(document.querySelector('#form-soda-diversey [name="acidez_atual"]').value) || 0;
        const concentracaoSoda = parseFloat(document.querySelector('#form-soda-diversey [name="concentracao_soda"]').value) || 50;
        
        if (concentracaoSoda === 0) return;
        
        const resultado = (volume * acidezAtual) / (concentracaoSoda * 100);
        
        document.getElementById('valor-soda-diversey').textContent = resultado.toFixed(3) + ' L';
        document.getElementById('result-soda-diversey').style.display = 'block';
    };
    
    // 15. Ácido-Diversey
    const calcularAcidoDiversey = function() {
        const volumeTitulante = parseFloat(document.querySelector('#form-acido-diversey [name="volume_titulante"]').value) || 0;
        const normalidade = parseFloat(document.querySelector('#form-acido-diversey [name="normalidade"]').value) || 0.1;
        const volumeAmostra = parseFloat(document.querySelector('#form-acido-diversey [name="volume_amostra"]').value) || 10;
        
        if (volumeAmostra === 0) return;
        
        const resultado = (volumeTitulante * normalidade * 0.064) / volumeAmostra;
        
        document.getElementById('valor-acido-diversey').textContent = resultado.toFixed(3) + ' %';
        document.getElementById('result-acido-diversey').style.display = 'block';
    };
    
    // 16. Perda de Base
    const calcularPerdaBase = function() {
        const volumeInicial = parseFloat(document.querySelector('#form-perda-base [name="volume_inicial"]').value) || 0;
        const volumeFinal = parseFloat(document.querySelector('#form-perda-base [name="volume_final"]').value) || 0;
        
        if (volumeInicial === 0) return;
        
        const resultado = ((volumeInicial - volumeFinal) / volumeInicial) * 100;
        
        document.getElementById('valor-perda-base').textContent = resultado.toFixed(2) + ' %';
        document.getElementById('result-perda-base').style.display = 'block';
    };
    
    // 17. Qtd. Açúcar a Puxar
    const calcularAcucarPuxar = function() {
        const brixAtual = parseFloat(document.querySelector('#form-acucar-puxar [name="brix_atual"]').value) || 0;
        const brixDesejado = parseFloat(document.querySelector('#form-acucar-puxar [name="brix_desejado"]').value) || 0;
        const volume = parseFloat(document.querySelector('#form-acucar-puxar [name="volume"]').value) || 0;
        const densidade = parseFloat(document.querySelector('#form-acucar-puxar [name="densidade"]').value) || 1;
        
        const resultado = ((brixDesejado - brixAtual) * volume * densidade) / 100;
        
        document.getElementById('valor-acucar-puxar').textContent = resultado.toFixed(2) + ' kg';
        document.getElementById('result-acucar-puxar').style.display = 'block';
    };
    
    // 18. Aumentar Brix Açúcar Batido
    const calcularAcucarBatido = function() {
        const brixAtual = parseFloat(document.querySelector('#form-acucar-batido [name="brix_atual"]').value) || 0;
        const brixDesejado = parseFloat(document.querySelector('#form-acucar-batido [name="brix_desejado"]').value) || 0;
        const volume = parseFloat(document.querySelector('#form-acucar-batido [name="volume"]').value) || 0;
        const densidade = parseFloat(document.querySelector('#form-acucar-batido [name="densidade"]').value) || 1;
        
        const resultado = ((brixDesejado - brixAtual) * volume * densidade) / 100;
        
        document.getElementById('valor-acucar-batido').textContent = resultado.toFixed(2) + ' kg';
        document.getElementById('result-acucar-batido').style.display = 'block';
    };
    
    // 19. Previsão Brix
    const calcularPrevisaoBrix = function() {
        const brix1 = parseFloat(document.querySelector('#form-previsao-brix [name="brix1"]').value) || 0;
        const vol1 = parseFloat(document.querySelector('#form-previsao-brix [name="vol1"]').value) || 0;
        const brix2 = parseFloat(document.querySelector('#form-previsao-brix [name="brix2"]').value) || 0;
        const vol2 = parseFloat(document.querySelector('#form-previsao-brix [name="vol2"]').value) || 0;
        
        if ((vol1 + vol2) === 0) return;
        
        const resultado = (brix1 * vol1 + brix2 * vol2) / (vol1 + vol2);
        const volumeTotal = vol1 + vol2;
        
        document.getElementById('valor-previsao-brix').textContent = resultado.toFixed(2) + ' °Bx';
        document.getElementById('valor-previsao-brix-vol').textContent = volumeTotal.toFixed(2) + ' L';
        document.getElementById('result-previsao-brix').style.display = 'block';
    };
    
    // 20. Previsão Acidez
    const calcularPrevisaoAcidez = function() {
        const acidez1 = parseFloat(document.querySelector('#form-previsao-acidez [name="acidez1"]').value) || 0;
        const vol1 = parseFloat(document.querySelector('#form-previsao-acidez [name="vol1"]').value) || 0;
        const acidez2 = parseFloat(document.querySelector('#form-previsao-acidez [name="acidez2"]').value) || 0;
        const vol2 = parseFloat(document.querySelector('#form-previsao-acidez [name="vol2"]').value) || 0;
        
        if ((vol1 + vol2) === 0) return;
        
        const resultado = (acidez1 * vol1 + acidez2 * vol2) / (vol1 + vol2);
        const volumeTotal = vol1 + vol2;
        
        document.getElementById('valor-previsao-acidez').textContent = resultado.toFixed(3) + ' %';
        document.getElementById('valor-previsao-acidez-vol').textContent = volumeTotal.toFixed(2) + ' L';
        document.getElementById('result-previsao-acidez').style.display = 'block';
    };
    
    // 21. Tempo de Finalização
    const calcularTempoFinalizacao = function() {
        const volume = parseFloat(document.querySelector('#form-tempo-finalizacao [name="volume"]').value) || 0;
        const vazao = parseFloat(document.querySelector('#form-tempo-finalizacao [name="vazao"]').value) || 0;
        
        if (vazao === 0) return;
        
        const resultado = volume / vazao;
        
        // Converter para horas e minutos
        const horas = Math.floor(resultado / 60);
        const minutos = Math.round(resultado % 60);
        const tempoFormatado = (horas < 10 ? '0' : '') + horas + ':' + (minutos < 10 ? '0' : '') + minutos;
        
        document.getElementById('valor-tempo-finalizacao').textContent = resultado.toFixed(2) + ' min';
        document.getElementById('valor-tempo-finalizacao-conv').textContent = tempoFormatado + ' h:min';
        document.getElementById('result-tempo-finalizacao').style.display = 'block';
    };
    
    // 22. Aumentar Acidez
    const calcularAumentarAcidez = function() {
        const acidezAtual = parseFloat(document.querySelector('#form-aumentar-acidez [name="acidez_atual"]').value) || 0;
        const acidezDesejada = parseFloat(document.querySelector('#form-aumentar-acidez [name="acidez_desejada"]').value) || 0;
        const volume = parseFloat(document.querySelector('#form-aumentar-acidez [name="volume"]').value) || 0;
        const fator = parseFloat(document.querySelector('#form-aumentar-acidez [name="fator"]').value) || 1;
        
        const resultado = (acidezDesejada - acidezAtual) * volume * fator;
        
        document.getElementById('valor-aumentar-acidez').textContent = resultado.toFixed(3) + ' L';
        document.getElementById('result-aumentar-acidez').style.display = 'block';
    };
    
    // 23. Diminuir Acidez
    const calcularDiminuirAcidez = function() {
        const volumeAtual = parseFloat(document.querySelector('#form-diminuir-acidez [name="volume_atual"]').value) || 0;
        const acidezAtual = parseFloat(document.querySelector('#form-diminuir-acidez [name="acidez_atual"]').value) || 0;
        const acidezDesejada = parseFloat(document.querySelector('#form-diminuir-acidez [name="acidez_desejada"]').value) || 0;
        
        if (acidezDesejada === 0) return;
        
        const novoVolume = (volumeAtual * acidezAtual) / acidezDesejada;
        const aguaAdicionar = novoVolume - volumeAtual;
        
        document.getElementById('valor-diminuir-acidez').textContent = novoVolume.toFixed(2) + ' L';
        document.getElementById('valor-diminuir-acidez-agua').textContent = aguaAdicionar.toFixed(2) + ' L';
        document.getElementById('result-diminuir-acidez').style.display = 'block';
    };
    
    // 24. Correção de Brix
    const calcularCorrecaoBrix = function() {
        const brixInicial = parseFloat(document.querySelector('#form-correcao-brix [name="brix_inicial"]').value) || 0;
        const volumeInicial = parseFloat(document.querySelector('#form-correcao-brix [name="volume_inicial"]').value) || 0;
        const brixDesejado = parseFloat(document.querySelector('#form-correcao-brix [name="brix_desejado"]').value) || 0;
        
        if (brixDesejado === 0) return;
        
        const novoVolume = (brixInicial * volumeInicial) / brixDesejado;
        const aguaAdicionar = novoVolume - volumeInicial;
        
        document.getElementById('valor-correcao-brix').textContent = novoVolume.toFixed(2) + ' L';
        document.getElementById('valor-correcao-brix-agua').textContent = aguaAdicionar.toFixed(2) + ' L';
        document.getElementById('result-correcao-brix').style.display = 'block';
    };
    
    // 25. Conversão Cristal Líquido
    const calcularCristalLiquido = function() {
        const acucarCristal = parseFloat(document.querySelector('#form-cristal-liquido [name="acucar_cristal"]').value) || 0;
        const densidade = parseFloat(document.querySelector('#form-cristal-liquido [name="densidade"]').value) || 1;
        
        if (densidade === 0) return;
        
        const resultado = acucarCristal / densidade;
        
        document.getElementById('valor-cristal-liquido').textContent = resultado.toFixed(2) + ' L';
        document.getElementById('result-cristal-liquido').style.display = 'block';
    };
    
    // 26. Correção Açúcar Cristal
    const calcularCorrecaoAcucar = function() {
        const brixAtual = parseFloat(document.querySelector('#form-correcao-acucar [name="brix_atual"]').value) || 0;
        const brixDesejado = parseFloat(document.querySelector('#form-correcao-acucar [name="brix_desejado"]').value) || 0;
        const volume = parseFloat(document.querySelector('#form-correcao-acucar [name="volume"]').value) || 0;
        
        const resultado = (brixDesejado - brixAtual) * volume / 100;
        
        document.getElementById('valor-correcao-acucar').textContent = resultado.toFixed(2) + ' kg';
        document.getElementById('result-correcao-acucar').style.display = 'block';
    };
    
    // 27. Conversão Líquido - Cristal
    const calcularLiquidoCristal = function() {
        const volumeSolucao = parseFloat(document.querySelector('#form-liquido-cristal [name="volume_solucao"]').value) || 0;
        const densidade = parseFloat(document.querySelector('#form-liquido-cristal [name="densidade"]').value) || 1;
        const percentualAcucar = parseFloat(document.querySelector('#form-liquido-cristal [name="percentual_acucar"]').value) || 0;
        
        const resultado = volumeSolucao * densidade * (percentualAcucar / 100);
        
        document.getElementById('valor-liquido-cristal').textContent = resultado.toFixed(2) + ' kg';
        document.getElementById('result-liquido-cristal').style.display = 'block';
    };
    
    // 28. Peso Líquido 200
    const calcularPesoLiquido200 = function() {
        const pesoBruto = parseFloat(document.querySelector('#form-peso-liquido-200 [name="peso_bruto"]').value) || 0;
        const tara = parseFloat(document.querySelector('#form-peso-liquido-200 [name="tara"]').value) || 0;
        
        const resultado = pesoBruto - tara;
        
        document.getElementById('valor-peso-liquido-200').textContent = resultado.toFixed(3) + ' kg';
        document.getElementById('result-peso-liquido-200').style.display = 'block';
    };
    
    // 29. Peso Líquido Litro
    const calcularPesoLiquidoLitro = function() {
        const pesoLiquido = parseFloat(document.querySelector('#form-peso-liquido-litro [name="peso_liquido"]').value) || 0;
        const densidade = parseFloat(document.querySelector('#form-peso-liquido-litro [name="densidade"]').value) || 1;
        const pesoTotal = parseFloat(document.querySelector('#form-peso-liquido-litro [name="peso_total"]').value) || 0;
        const embalagem = parseFloat(document.querySelector('#form-peso-liquido-litro [name="embalagem"]').value) || 0;
        
        if (densidade === 0) return;
        
        const volumeLiquido = pesoLiquido / densidade;
        const pesoLiquidoZeragem = pesoTotal - embalagem;
        
        document.getElementById('valor-volume-liquido').textContent = volumeLiquido.toFixed(2) + ' L';
        document.getElementById('valor-peso-liquido-zeragem').textContent = pesoLiquidoZeragem.toFixed(2) + ' kg';
        document.getElementById('result-peso-liquido-litro').style.display = 'block';
    };
    
    // --- ASSOCIAR EVENTOS AOS BOTÕES ---
    
    // Event listeners para botões de calcular
    document.getElementById('calcular-producao-final')?.addEventListener('click', calcularProducaoFinal);
    document.getElementById('calcular-producao-litro')?.addEventListener('click', calcularProducaoLitro);
    document.getElementById('calcular-abaixar-brix')?.addEventListener('click', calcularAbaixarBrix);
    document.getElementById('calcular-brix-corrigido')?.addEventListener('click', calcularBrixCorrigido);
    document.getElementById('calcular-peso-bruto')?.addEventListener('click', calcularPesoBruto);
    document.getElementById('calcular-corantes')?.addEventListener('click', calcularCorantes);
    document.getElementById('calcular-densidade')?.addEventListener('click', calcularDensidade);
    document.getElementById('calcular-ratio')?.addEventListener('click', calcularRatio);
    document.getElementById('calcular-ratio-brix')?.addEventListener('click', calcularRatioBrix);
    document.getElementById('calcular-ratio-acidez')?.addEventListener('click', calcularRatioAcidez);
    document.getElementById('calcular-acidez')?.addEventListener('click', calcularAcidez);
    document.getElementById('calcular-calculo-soda')?.addEventListener('click', calcularCalculoSoda);
    document.getElementById('calcular-vitamina-c')?.addEventListener('click', calcularVitaminaC);
    document.getElementById('calcular-soda-diversey')?.addEventListener('click', calcularSodaDiversey);
    document.getElementById('calcular-acido-diversey')?.addEventListener('click', calcularAcidoDiversey);
    document.getElementById('calcular-perda-base')?.addEventListener('click', calcularPerdaBase);
    document.getElementById('calcular-acucar-puxar')?.addEventListener('click', calcularAcucarPuxar);
    document.getElementById('calcular-acucar-batido')?.addEventListener('click', calcularAcucarBatido);
    document.getElementById('calcular-previsao-brix')?.addEventListener('click', calcularPrevisaoBrix);
    document.getElementById('calcular-previsao-acidez')?.addEventListener('click', calcularPrevisaoAcidez);
    document.getElementById('calcular-tempo-finalizacao')?.addEventListener('click', calcularTempoFinalizacao);
    document.getElementById('calcular-aumentar-acidez')?.addEventListener('click', calcularAumentarAcidez);
    document.getElementById('calcular-diminuir-acidez')?.addEventListener('click', calcularDiminuirAcidez);
    document.getElementById('calcular-correcao-brix')?.addEventListener('click', calcularCorrecaoBrix);
    document.getElementById('calcular-cristal-liquido')?.addEventListener('click', calcularCristalLiquido);
    document.getElementById('calcular-correcao-acucar')?.addEventListener('click', calcularCorrecaoAcucar);
    document.getElementById('calcular-liquido-cristal')?.addEventListener('click', calcularLiquidoCristal);
    document.getElementById('calcular-peso-liquido-200')?.addEventListener('click', calcularPesoLiquido200);
    document.getElementById('calcular-peso-liquido-litro')?.addEventListener('click', calcularPesoLiquidoLitro);
    
    // Event listeners para limpar formulários
    document.querySelectorAll('.btn-limpar').forEach(button => {
        button.addEventListener('click', function() {
            const form = this.closest('form');
            form.reset();
            const resultBox = this.closest('.calculation-group').querySelector('.result-box');
            if (resultBox) resultBox.style.display = 'none';
        });
    });
    
    // Filtro de pesquisa
    const searchInput = document.getElementById('searchCalc');
    searchInput.addEventListener('input', function() {
        const searchTerm = this.value.toLowerCase();
        
        document.querySelectorAll('#calcTabs .nav-link').forEach(link => {
            const text = link.textContent.toLowerCase();
            const shouldShow = text.includes(searchTerm);
            
            link.parentElement.style.display = shouldShow ? '' : 'none';
            
            // Se estamos escondendo a aba ativa, ative a primeira aba visível
            if (!shouldShow && link.classList.contains('active')) {
                const firstVisibleTab = document.querySelector('#calcTabs .nav-link:not([style*="display: none"])');
                if (firstVisibleTab) {
                    // Remover ativo de todas as abas
                    document.querySelectorAll('#calcTabs .nav-link').forEach(t => {
                        t.classList.remove('active');
                        t.setAttribute('aria-selected', 'false');
                    });
                    
                    // Remover ativo de todos os painéis
                    document.querySelectorAll('.tab-pane').forEach(p => {
                        p.classList.remove('show', 'active');
                    });
                    
                    // Ativar primeira aba visível
                    firstVisibleTab.classList.add('active');
                    firstVisibleTab.setAttribute('aria-selected', 'true');
                    
                    // Ativar painel correspondente
                    const targetId = firstVisibleTab.getAttribute('href').substring(1);
                    document.getElementById(targetId).classList.add('show', 'active');
                }
            }
        });
        
        // Verificar se não há resultados
        const hasVisibleTabs = document.querySelectorAll('#calcTabs .nav-link:not([style*="display: none"])').length > 0;
        
        if (!hasVisibleTabs) {
            // Mostrar mensagem "Nenhum cálculo encontrado"
            if (!document.getElementById('no-results-message')) {
                const noResults = document.createElement('div');
                noResults.id = 'no-results-message';
                noResults.className = 'no-results';
                noResults.innerHTML = '<i class="fas fa-search me-2"></i> Nenhum cálculo encontrado para "' + searchTerm + '".';
                
                document.getElementById('calcTabContent').appendChild(noResults);
            }
        } else {
            // Remover mensagem se existir
            const noResults = document.getElementById('no-results-message');
            if (noResults) {
                noResults.remove();
            }
        }
    });
});
</script>
{% endblock %}